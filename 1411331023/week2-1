#include <stdio.h>

// studentData structure definition               
struct studentData {
    unsigned int ID;  // student ID
    char Name[15];       // student last name    
    int math, computer;      // student first name   
    double average;            // student grade   
};

int main(void)
{
    FILE* cfPtr = NULL; // students.dat file pointer
    typedef struct clientData stu;
    // fopen opens the file; exits if file cannot be opened
    if ((fopen_s(&cfPtr, "students.dat", "rb+")) != 0) {
        puts("File could not be opened.");
    }
    else {
        // create studentData with default information
        struct studentData client = { 0, "",0,0, 0.0 };

        // prompt user to specify student ID
        printf("%s", "Enter student ID (1 to 100, 0 to end input): ");
        scanf_s("%d", &client.ID);

        // user enters information, which is copied into file
        while (client.ID != 0) {
            // prompt for student last name, first name and grade
            printf("%s", "Enter lastname, MATH, COMPUTER: ");

            // set record lastName, firstName, and grade value
            scanf_s("%14s%9d%d", client.Name, 14, &client.math, &client.computer);
            client.average = (client.math + client.computer) / 2;

            // seek position in file to user-specified record   
            fseek(cfPtr, (client.ID - 1) *
                sizeof(struct studentData), SEEK_SET);

            // write user-specified information into the file              
            fwrite(&client, sizeof(struct studentData), 1, cfPtr);

            // allow user to input another student ID
            printf("%s", "Enter account number: ");
            scanf_s("%d", &client.ID);
        }

        fclose(cfPtr); // fclose closes the file
    }


}
